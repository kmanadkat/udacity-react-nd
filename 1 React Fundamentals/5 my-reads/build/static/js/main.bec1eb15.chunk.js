(this["webpackJsonpmy-reads"]=this["webpackJsonpmy-reads"]||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/noThumbnail.b798ff64.png"},21:function(e,t,a){e.exports=a.p+"static/media/logo.34bf1968.png"},25:function(e,t,a){e.exports=a(39)},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(20),s=a.n(r),c=a(24),l=a(7),i=a(8),m=a(10),d=a(9),u=a(1),h=a(6),p=a(21),f=a.n(p);var b=function(){var e=Object(u.e)();return o.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark py-3"},o.a.createElement("div",{className:"container"},o.a.createElement(h.b,{className:"navbar-brand",to:"/"},o.a.createElement("img",{height:"32",src:f.a,alt:"My Reads Logo"})," ",o.a.createElement("span",{className:"ml-2"},"My Reads")),o.a.createElement("ul",{className:"navbar-nav"},o.a.createElement("li",{className:"nav-item mx-4 ".concat("/"===e.pathname?"active":"")},o.a.createElement(h.b,{className:"nav-link",to:"/"},"My Shelf")),o.a.createElement("li",{className:"nav-item mx-4 ".concat("/search"===e.pathname?"active":"")},o.a.createElement(h.b,{className:"nav-link",to:"/search"},"All Books")))))},k=a(14),v=a.n(k);var g={fontSize:"14px",fontWeight:"bold",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},E=function(e){var t=e.title,a=e.authors;return o.a.createElement(n.Fragment,null,o.a.createElement("p",{className:"book-title mt-2 pt-2 mb-0",style:g},t||"Unknow title"),o.a.createElement("p",{className:"my-0 text-muted",style:{lineHeight:"1em"}},a.map((function(e){return o.a.createElement("span",{key:e,style:{fontSize:"12px"}},e)}))))},y=a(13);var N=function(e){var t=e.bookId,a=e.shelfType,n=e.handleUpdate;return o.a.createElement("div",{className:"dropdown-menu"},o.a.createElement("button",{className:"dropdown-item ".concat("currentlyReading"===a&&"disabled"),onClick:function(){return n({id:t},"currentlyReading")}},"Start reading"),o.a.createElement("button",{className:"dropdown-item ".concat("wantToRead"===a&&"disabled"),onClick:function(){return n({id:t},"wantToRead")}},"Save for later"),o.a.createElement("button",{className:"dropdown-item ".concat("read"===a&&"disabled"),onClick:function(){return n({id:t},"read")}},"Mark completed"),o.a.createElement("button",{className:"dropdown-item ".concat("none"===a&&"disabled"),onClick:function(){return n({id:t},"none")}},"Remove from shelf"))};var w={height:"200px",width:"150px",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPositionY:"top",backgroundPositionX:"center"},S={position:"absolute",top:"-12px",right:"-4%"},x={height:"40px",width:"40px",borderRadius:"50%"},T=function(e){var t=e.bookThumb,a=e.shelfType,n=e.handleUpdate,r=e.book;return o.a.createElement("div",{className:"wrapper position-relative"},o.a.createElement("div",{className:"book-image mx-auto image-shadow",style:Object(y.a)({backgroundImage:"url("+t+")"},w)}),o.a.createElement("div",{className:"dropdown",style:S},o.a.createElement("button",{className:"btn btn-".concat("none"!==a?"success":"primary"),style:x,id:"dropdownMenuButton","data-toggle":"dropdown"},o.a.createElement("span",{className:"font-weight-bold",style:{position:"relative",bottom:"5px",right:"1px"}},"...")),o.a.createElement(N,{bookId:r.id,shelfType:a,handleUpdate:n})))};var j=function(e){var t=e.book,a=e.shelfType,r=e.handleUpdate,s=t.imageLinks&&t.imageLinks.smallThumbnail||v.a;return t.authors=t.authors||[],o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"book-card text-center position-relative"},o.a.createElement(T,{bookThumb:s,book:t,shelfType:a,handleUpdate:r}),o.a.createElement(E,{title:t.title,authors:t.authors})),o.a.createElement(h.b,{className:"btn btn-link",to:"/book/".concat(t.id)},"Read more"))};var B=function(e){var t=e.spinType,a=e.otherClasses;return o.a.createElement("div",{className:"spinner-grow text-".concat(t," ").concat(a||""),role:"status"})};var O=function(e){var t=e.shelfType,a=e.isLoading;return o.a.createElement("div",{className:"shadow-sm border bg-light rounded mt-5 py-2 d-flex justify-content-between align-items-center"},o.a.createElement("p",{className:"my-0 pl-4 py-2 font-weight-bold"},{currentlyReading:"\ud83d\udcd6 Currently Reading Books",wantToRead:"\ud83d\udcda Books To Read",read:"\ud83d\udce6 Completed Reading Books"}[t]),a&&o.a.createElement(B,{spinType:"success",otherClasses:"mr-3"}))};var L=function(e){var t=e.books,a=e.shelfType,r=e.handleUpdate,s=e.isLoading;return o.a.createElement(n.Fragment,null,o.a.createElement(O,{isLoading:s,shelfType:a}),o.a.createElement("div",{className:"row"},t.map((function(e){return o.a.createElement("div",{className:"col-xl-2 col-lg-3 col-md-4 col-6 mt-4 pt-2 d-flex flex-column justify-content-between",key:e.id},o.a.createElement(j,{book:e,handleUpdate:r,shelfType:e.shelf}))}))))};var R=function(e){var t=e.shelf_books,a=e.isLoading,n=e.updateBookShelf;return o.a.createElement("section",{className:"pb-3 mb-5"},o.a.createElement("div",{className:"container"},o.a.createElement(L,{books:t.filter((function(e){return"currentlyReading"===e.shelf})),isLoading:a,shelfType:"currentlyReading",handleUpdate:n}),o.a.createElement(L,{books:t.filter((function(e){return"wantToRead"===e.shelf})),isLoading:a,shelfType:"wantToRead",handleUpdate:n}),o.a.createElement(L,{books:t.filter((function(e){return"read"===e.shelf})),isLoading:a,shelfType:"read",handleUpdate:n})))},C="https://reactnd-books-api.udacity.com",U=localStorage.token;U||(U=localStorage.token=Math.random().toString(36).substr(-8));var _={Accept:"application/json",Authorization:U},I=function(e){return fetch("".concat(C,"/books/").concat(e),{headers:_}).then((function(e){return e.json()})).then((function(e){return e.book}))},M=function(e,t){return fetch("".concat(C,"/books/").concat(e.id),{method:"PUT",headers:Object(y.a)(Object(y.a)({},_),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},A=function(e){return fetch("".concat(C,"/search"),{method:"POST",headers:Object(y.a)(Object(y.a)({},_),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},P=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={searchString:""},e.handleInput=function(t){e.setState({searchString:t.target.value}),e.props.getSearchedBooks(t.target.value)},e}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"form-group mx-sm-3 mb-4"},o.a.createElement("input",{type:"search",className:"form-control",id:"bookSearchInput",value:this.state.searchString,onChange:this.handleInput,placeholder:"Search for React, Web, Java, HTML ..."}))}}]),a}(o.a.Component);var J=function(e){var t=e.books,a=e.updateBookShelf;return o.a.createElement(n.Fragment,null,t.map((function(e){return o.a.createElement("div",{className:"col-xl-2 col-lg-3 col-md-4 col-6 mt-4 pt-2 d-flex flex-column justify-content-between",key:e.id},o.a.createElement(j,{book:e,handleUpdate:a,shelfType:e.shelf}))})))},z=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={searchBooks:[],isLoading:!1},e.addShelfToBooks=function(t){var a=e.props.shelf_books;return t.map((function(e){for(var t=0;t<a.length;t++)if(e.id===a[t].id)return e.shelf=a[t].shelf,e;return e.shelf="none",e}))},e.getSearchedBooks=function(t){e.setState({isLoading:!0},(function(){""!==t.trim()?A(t.trim()).then((function(t){t.error?e.setState({searchBooks:[],isLoading:!1}):e.setState({searchBooks:t,isLoading:!1})})):e.setState({searchBooks:[],isLoading:!1})}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.updateBookShelf,t=this.addShelfToBooks(this.state.searchBooks);return o.a.createElement("section",{className:"pb-3 my-5"},o.a.createElement("div",{className:"container"},o.a.createElement(P,{getSearchedBooks:this.getSearchedBooks}),this.state.isLoading?o.a.createElement("div",{className:"text-center"},o.a.createElement(B,{spinType:"primary"})):o.a.createElement("div",{className:"row"},o.a.createElement(J,{books:t,updateBookShelf:e}))))}}]),a}(o.a.Component);var D=function(e){var t=e.book,a=t.title||"Unknow Title";return t.authors=t.authors||[],o.a.createElement("div",{className:"col-md-8"},o.a.createElement("h3",null,a),o.a.createElement("p",null,t.subtitle),o.a.createElement("p",{className:"text-muted"},t.authors.map((function(e,t){return o.a.createElement("span",{key:t},0!==t&&","," ",e)}))),o.a.createElement("hr",null),o.a.createElement("p",null,t.description))},F=a(23),H=a.n(F);var W=function(e){var t=e.book,a=t.title||"Unknow Title",n=t.imageLinks&&t.imageLinks.smallThumbnail||v.a;return o.a.createElement("div",{className:"col-md-4"},o.a.createElement("img",{className:"d-block rounded mb-3 shadow-sm",src:n,width:"65%",alt:a}),o.a.createElement(H.a,{rating:t.averageRating,starRatedColor:"green",numberOfStars:5,starDimension:"20px",starSpacing:"2px",name:"rating"}),o.a.createElement("p",{className:"mt-2 pt-2 mb-0"},"Pages : ",o.a.createElement("span",{className:"font-weight-bold"},t.pageCount||"-")),o.a.createElement("p",{className:"mt-0 pt-2 mb-0"},"Year : ",o.a.createElement("span",{className:"font-weight-bold"},t.publishedDate||"-")),t.publisher&&o.a.createElement("p",{className:"mt-0 pt-2"},"By ",t.publisher),o.a.createElement("div",{className:"mt-3"},t.infoLink&&o.a.createElement("a",{className:"btn btn-sm btn-outline-info px-3",rel:"noopener noreferrer",href:t.infoLink,target:"_blank"},"View Info"),t.previewLink&&o.a.createElement("a",{className:"btn btn-sm btn-outline-success px-3 ml-3",rel:"noopener noreferrer",href:t.previewLink,target:"_blank"},"Book Preview")))},Y=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={book:null},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.bookId;I(t).then((function(t){e.setState({book:t})}))}},{key:"render",value:function(){return o.a.createElement("section",{className:"py-5 my-3"},o.a.createElement("div",{className:"container"},this.state.book?o.a.createElement("div",{className:"row"},o.a.createElement(W,{book:this.state.book}),o.a.createElement(D,{book:this.state.book})):o.a.createElement("div",{className:"text-center"},o.a.createElement("div",{className:"spinner-grow text-primary",role:"status"}))))}}]),a}(o.a.Component),q=(a(38),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={shelf_books:[],isLoading:!0},e.updateBookShelf=function(t,a){M(t,a).then((function(n){var o=e.state.shelf_books,r=o.findIndex((function(e){return e.id===t.id}));-1!==r?("none"===a?o.splice(r,1):o[r].shelf=a,e.setState({shelf_books:o})):I(t.id).then((function(t){o=[].concat(Object(c.a)(o),[t]),e.setState({shelf_books:o})}))}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(C,"/books"),{headers:_}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(t){e.setState({shelf_books:t,isLoading:!1})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement(b,null),o.a.createElement(u.a,{exact:!0,path:"/",render:function(){return o.a.createElement(R,{shelf_books:e.state.shelf_books,isLoading:e.state.isLoading,updateBookShelf:e.updateBookShelf})}}),o.a.createElement(u.a,{exact:!0,path:"/search",render:function(){return o.a.createElement(z,{shelf_books:e.state.shelf_books,updateBookShelf:e.updateBookShelf})}}),o.a.createElement(u.a,{exact:!0,path:"/book/:bookId",component:Y}))}}]),a}(o.a.Component));s.a.render(o.a.createElement(h.a,null,o.a.createElement(q,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.bec1eb15.chunk.js.map